# Kubernetes manifest basic
## Probes 
Проверка работоспособности kubelet поддерживает три типа проверок работоспособности: 
- Проба запуска (`startup`).

- Проба работоспособности (`liveness`).

- Проба готовности (`readiness`).

### Проба запуска (startup)
Приложения с инфраструктурой и устаревшие приложения дольше запускаются при первой инициализации. В этом случае мы используем тот же метод проверки (команда, HTTP-запрос или проверка TCP), что и для остальных проб, но увеличиваем порог ожидания в секундах, чтобы приложение успело запуститься.

### Проба работоспособности (liveness)
Проба работоспособности проверяет, выполняется контейнер или нет.

Если проба не находит живой контейнер, автоматически выполняется политика перезапуска контейнера.

![](https://habrastorage.org/getpro/habr/upload_files/671/e13/aae/671e13aaebff7cc61b977618bed39128.gif)

### Проба готовности (readiness)
Проба готовности проверяет, готово ли приложение обслуживать запросы.

Если не готово, IP pod’а удаляется из списка конечных точек сервиса.
![](https://habrastorage.org/getpro/habr/upload_files/b1d/6c8/f66/b1d6c8f666e83d156f40afc50b4b0bec.gif)

### Настройка проб
В пробах можно настроить несколько значений:

- `initialDelaySeconds`: через сколько секунд после запуска контейнера начинаются пробы работоспособности или готовности.
По умолчанию — 0 секунд. Минимальное значение — 0.

- `periodSeconds`: сколько секунд проходит между пробами.
По умолчанию — 10 секунд. Минимальное значение — 1.

- `timeoutSeconds`: через сколько секунд истекает время ожидания пробы.По умолчанию — 1 секунда. Минимальное значение — 1.

- `successThreshold`: сколько проб подряд должно завершиться успехом, чтобы проверка считалась успешной после проваленной пробы. По умолчанию — 1. Для пробы работоспособности должно быть 1. Минимальное значение — 1.

- `failureThreshold`: сколько проб должно провалиться, чтобы пришлось перезапускать контейнер (или pod был помечен как неготовый, если речь о проверке готовности). По умолчанию — 3. Минимальное значение — 1.

## Kubelet производит с pod’ом три типа действия

- Выполняет команду в контейнере.

- Проверяет состояние определённого порта в контейнере.

- Выполняет запрос GET к IP-адресу контейнера.
