### **Ответы на вопросы**

#### **1. Объяснение значений в выводе `top`**
Команда `top` показывает информацию о процессах в реальном времени. Разберём основные столбцы и строки:

| **Столбец** | **Описание** |
|-------------|-------------|
| **PID**     | Идентификатор процесса (Process ID) |
| **USER**    | Пользователь, который запустил процесс |
| **PR**      | Приоритет процесса (от -20 до 19, где -20 — самый высокий приоритет) |
| **NI**      | Значение "nice", которое также влияет на приоритет процесса |
| **VIRT**    | Общий объём виртуальной памяти, используемой процессом (включая файлы, разделяемую память и т.д.) |
| **RES**     | Количество физической памяти (RAM), которое используется процессом |
| **SHR**     | Количество общей памяти, которая используется процессом и доступна другим процессам |
| **S**       | Статус процесса (например, S — спящий процесс, R — работающий, Z — зомби) |
| **%CPU**    | Процент времени процессора, который занимает процесс |
| **%MEM**    | Процент используемой оперативной памяти процессом |
| **TIME+**   | Общее время работы процесса (время CPU) |
| **COMMAND** | Имя команды или процесса |

**Пример вывода:**  
```bash
top - 10:50:00 up 2 days,  5:15,  1 user,  load average: 0.12, 0.05, 0.03
Tasks: 132 total,   1 running, 131 sleeping,   0 stopped,   0 zombie
%Cpu(s):  5.0 us,  1.0 sy,  0.0 ni, 94.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :   2048.0 total,   1234.5 free,    567.1 used,    246.4 buff/cache
MiB Swap:   1024.0 total,    876.1 free,    147.3 used.   1324.5 avail Mem 
```
- Строка **`Tasks:`** показывает количество процессов, из которых один работает, остальные спят.
- Строка **`Cpu(s):`** указывает на использование процессора (например, 5% на пользовательские процессы).
- Строки с **`Mem:`** и **`Swap:`** показывают использование оперативной памяти и свопа.

#### **2. Что такое зомби-процессы?**
Зомби-процесс — это завершённый процесс, который всё ещё присутствует в таблице процессов. Он уже не выполняется, но его родительский процесс не забрал код завершения. Зомби-процесс занимает место в таблице процессов, но не использует ресурсы системы. Обычно они исчезают после того, как родительский процесс использует команду `wait()` для получения информации о завершении дочернего процесса.

#### **3. Как запретить пользователю запускать слишком много процессов и зачем это нужно?**
Запрещать запуск слишком большого количества процессов помогает ограничить ресурсы системы и избежать чрезмерной загрузки. Это можно сделать с помощью лимитов на количество процессов в файле конфигурации `/etc/security/limits.conf`. Например:
```bash
*               soft    nproc           500
*               hard    nproc           600
```
Это ограничит количество процессов для всех пользователей:
- **soft** — мягкий лимит (предупреждение при превышении).
- **hard** — жёсткий лимит (нельзя превысить).

---

### **Задания**

#### **1. Запуск форк-бомбы**
**Форк-бомба** — это скрипт, который создаёт много дочерних процессов, что приводит к исчерпанию ресурсов системы:
```bash
:(){ :|:& };:
```
Эта команда будет создавать новый процесс, который вызывает сам себя, создавая бесконечное количество процессов.

#### **2. Перезагрузка виртуалки и ограничение процессов**
Для безопасного эксперимента в тестовой виртуальной машине:
1. Запустите форк-бомбу, чтобы заполнить процессор.
2. Перезагрузите виртуальную машину.
3. Ограничьте количество процессов для вашего пользователя:
   - Отредактируйте файл `/etc/security/limits.conf`:
     ```bash
     user_name   soft   nproc  500
     user_name   hard   nproc  500
     ```
4. Повторите запуск форк-бомбы. Теперь форк-бомба будет запускаться только до 500 процессов для вашего пользователя, а система не будет перегружена.

**Почему это важно:**  
Это помогает ограничить злоупотребления, такие как форк-бомбы, и предотвращает их воздействие на всю систему, давая возможность сохранить работоспособность других пользователей.



Давайте разберём вывод команды `top` и объясним каждый компонент:

### **1. Строка с информацией о системе:**

```bash
top - 10:50:00 up 2 days,  5:15,  1 user,  load average: 0.12, 0.05, 0.03
```
- **10:50:00** — текущее время.
- **up 2 days, 5:15** — система работает уже 2 дня и 5 часов 15 минут (время с момента последней перезагрузки).
- **1 user** — в системе сейчас один пользователь.
- **load average: 0.12, 0.05, 0.03** — средняя нагрузка на процессор за последние 1, 5 и 15 минут соответственно. Эти значения показывают среднее количество процессов, ожидающих выполнения. В данном случае нагрузка низкая, так как значения меньше 1.

### **2. Строка с информацией о задачах:**

```bash
Tasks: 132 total,   1 running, 131 sleeping,   0 stopped,   0 zombie
```
- **132 total** — всего 132 процесса.
- **1 running** — из них 1 процесс активно выполняется.
- **131 sleeping** — 131 процесс в режиме ожидания (спит).
- **0 stopped** — нет остановленных процессов.
- **0 zombie** — нет "зомби" процессов, т.е. завершённых процессов, информация о которых не была обработана.

### **3. Строка с информацией о процессоре (CPU):**

```bash
%Cpu(s):  5.0 us,  1.0 sy,  0.0 ni, 94.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
```
- **5.0 us** — 5% процессорного времени используется для выполнения пользовательских процессов (user processes).
- **1.0 sy** — 1% процессорного времени используется для системных процессов (kernel processes).
- **0.0 ni** — 0% времени процессора уходит на процессы с изменённым приоритетом (nice).
- **94.0 id** — 94% процессорного времени процессор простаивает (idle).
- **0.0 wa** — 0% времени процессора ожидает ввода-вывода (waiting for I/O).
- **0.0 hi** — 0% процессорного времени затрачено на обработку прерываний аппаратного уровня (hardware interrupts).
- **0.0 si** — 0% времени процессора затрачено на обработку программных прерываний (software interrupts).
- **0.0 st** — 0% процессорного времени затрачено на виртуализацию (steal time), если процессор используется гипервизором.

### **4. Строка с информацией о памяти:**

```bash
MiB Mem :   2048.0 total,   1234.5 free,    567.1 used,    246.4 buff/cache
```
- **2048.0 total** — общая физическая память (ОЗУ) составляет 2048 MB.
- **1234.5 free** — из них 1234.5 MB свободно.
- **567.1 used** — 567.1 MB используется процессами.
- **246.4 buff/cache** — 246.4 MB используется для буферов и кэширования, т.е. операционная система использует эту память для хранения данных, с возможностью перераспределения.

### **5. Строка с информацией о своп-файле:**

```bash
MiB Swap:   1024.0 total,    876.1 free,    147.3 used.   1324.5 avail Mem
```
- **1024.0 total** — общий объём своп-файла составляет 1024 MB.
- **876.1 free** — из них 876.1 MB свободно.
- **147.3 used** — 147.3 MB используется.
- **1324.5 avail Mem** — доступная память (с учётом и ОЗУ, и свопа) составляет 1324.5 MB, это суммарная память, которую можно использовать.

### **Итог:**
- **Нагрузка на систему** (load average) и **использование процессора** (CPU) показывают, что система в целом не перегружена.
- **Использование памяти** показывает, что большая часть ОЗУ свободна, и только небольшая её часть используется.
- **Своп-файл** также используется, но в незначительных количествах.

Этот вывод указывает на то, что система работает нормально, с низкой нагрузкой, и не сталкивается с проблемами с памятью или процессами.