### Ответы на вопросы:

1. **Зачем нужен LVM?**
   - **LVM (Logical Volume Manager)** позволяет динамически управлять разделами на диске. С его помощью можно:
     - Легко изменять размер томов (например, увеличивать или уменьшать их).
     - Объединять несколько физических дисков в одну группу томов (VG).
     - Использовать снапшоты для создания резервных копий данных.
     - Повышать гибкость и масштабируемость хранения данных.
   
2. **Опишите весь процесс от добавления диска до настройки fstab с учётом использования LVM.**
   1. **Добавление диска**: Подключаем новый диск к системе (например, `/dev/sdb`).
   2. **Создание физического тома (PV)**:
      ```bash
      pvcreate /dev/sdb
      ```
   3. **Создание группы томов (VG)**:
      ```bash
      vgcreate my_vg /dev/sdb
      ```
   4. **Создание логического тома (LV)**:
      ```bash
      lvcreate -L 10G -n my_lv my_vg
      ```
      Где `-L` — это размер тома, а `-n` — имя логического тома.
   5. **Создание файловой системы (FS)** на логическом томе:
      ```bash
      mkfs.ext4 /dev/my_vg/my_lv
      ```
   6. **Монтирование**:
      ```bash
      mount /dev/my_vg/my_lv /mnt
      ```
   7. **Настройка автомонтирования через fstab**:
      Добавьте строку в `/etc/fstab`:
      ```bash
      /dev/my_vg/my_lv /mnt ext4 defaults 0 0
      ```

3. **На файловой системе с LV заканчивается место. Вы добавили новый диск. Как сделать так, чтобы файловая система увеличилась?**
   1. **Добавляем новый диск в группу томов (VG)**:
      - Создаем физический том на новом диске:
        ```bash
        pvcreate /dev/sdc
        ```
      - Добавляем диск в группу томов:
        ```bash
        vgextend my_vg /dev/sdc
        ```
   2. **Увеличиваем размер логического тома (LV)**:
      ```bash
      lvextend -l +100%FREE /dev/my_vg/my_lv
      ```
      Это увеличит логический том на все доступные свободные блоки в VG.
   3. **Расширяем файловую систему**:
      Для ext4:
      ```bash
      resize2fs /dev/my_vg/my_lv
      ```

4. **Как посмотреть информацию о физических томах, группах томов и логических томах?**
   - Для отображения информации о **физических томах**:
     ```bash
     pvdisplay
     ```
   - Для отображения информации о **группах томов**:
     ```bash
     vgdisplay
     ```
   - Для отображения информации о **логических томах**:
     ```bash
     lvdisplay
     ```

5. **Опишите принцип работы copy-on-write (COW).**
   - Принцип **copy-on-write** заключается в том, что когда происходит изменение данных, система не изменяет оригинальные данные сразу, а создает копию данных в другом месте, чтобы сохранить неизменность оригинала. Это используется в снапшотах и оптимизирует использование памяти, так как данные копируются только при необходимости.

6. **Как создать снапшот? Как его восстановить или удалить?**
   - **Создание снапшота**:
     ```bash
     lvcreate --size 1G --snapshot --name my_snapshot /dev/my_vg/my_lv
     ```
     - `--size 1G` — это размер для снапшота, который будет хранить изменения.
   - **Восстановление снапшота**:
     Для восстановления данных из снапшота, можно использовать:
     ```bash
     lvconvert --merge /dev/my_vg/my_snapshot
     ```
   - **Удаление снапшота**:
     ```bash
     lvremove /dev/my_vg/my_snapshot
     ```

7. **Почему не стоит сразу выделять всё пространство под логический том?**
   - Выделение всего пространства сразу может привести к излишнему потреблению дискового пространства, особенно если оно не используется. Лучше оставить часть свободного места для расширения томов или добавления новых в будущем.

---

### Задания:

1. **Создайте LVM, состоящий из двух разделов и одного целого диска. Внутри группы томов создайте два логических раздела, каждый из которых должен занимать 30% пространства группы томов. При включении файловая система на первом логическом разделе должна монтироваться в директорию /data, а фс второго логического раздела должна монтироваться в директорию /backup.**
   - Создайте физические тома на двух разделах и одном диске:
     ```bash
     pvcreate /dev/sdb1 /dev/sdb2 /dev/sdc
     ```
   - Создайте группу томов:
     ```bash
     vgcreate my_vg /dev/sdb1 /dev/sdb2 /dev/sdc
     ```
   - Создайте два логических тома, каждый из которых будет занимать 30% пространства:
     ```bash
     lvcreate -L 30%FREE -n lv_data my_vg
     lvcreate -L 30%FREE -n lv_backup my_vg
     ```
   - Форматируем файловые системы:
     ```bash
     mkfs.ext4 /dev/my_vg/lv_data
     mkfs.ext4 /dev/my_vg/lv_backup
     ```
   - Монтируем их:
     ```bash
     mount /dev/my_vg/lv_data /data
     mount /dev/my_vg/lv_backup /backup
     ```
   - Настроим автозагрузку в `/etc/fstab`:
     ```bash
     /dev/my_vg/lv_data /data ext4 defaults 0 0
     /dev/my_vg/lv_backup /backup ext4 defaults 0 0
     ```

2. **Добавьте к виртуалке 3 диска и создайте LVM, расширьте его, сделайте снапшот и восстановите.**
   - Для выполнения этого задания следуйте шагам из предыдущих ответов, используя новые диски и расширяя VG.